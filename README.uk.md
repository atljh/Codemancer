# Codemancer: Тактичний командний центр для AI-нативної розробки

Codemancer — це не просто IDE. Це **тактичний інтерфейс управління реальністю коду**, створений для епохи, де розробка — це не написання рядків, а управління потужними ІІ-агентами.

Побудований на Tauri 2.0 + React 19 + Python FastAPI. Працює як візуальний компаньйон для CLI-інструментів на кшталт Claude Code, надаючи UI для того, чого термінал не може: візуалізація, трекінг та інтерактивні панелі.

[English README](README.md) | [README на русском](README.ru.md)

![Codemancer Screenshot](docs/screenshot.png)

## Бачення

Сучасні інструменти (VS Code, Cursor) — це спадщина минулого. Вони змушують людину працювати «мікроменеджером» тексту. Codemancer переносить тебе на рівень **Стратега**.

Поки твій ІІ-агент оперує файлами та терміналом, ти бачиш загальну картину бою:

- **Інтелект замість тексту** — ти спілкуєшся з проєктом як з живим організмом
- **Дофамін замість вигорання** — кожна вирішена задача — це захоплений сектор і зростання твого впливу
- **Контекст замість хаосу** — візуальні карти залежностей і радари техборгу замінюють тисячі відкритих вкладок

## Ключові можливості

### Тактична карта

Інтерактивний граф залежностей з ефектом «туману війни». Бач **Blast Radius** своїх змін до того, як вони зламають систему. Помаранчеве підсвічування показує уражені модулі коли ІІ пише файли.

### Агентні інструменти (The Hands)

Агент має повний доступ до `list_files`, `read_file`, `write_file`, `search_text` та `run_command`. Він не просто радить — він виконує. Невдалі команди завдають шкоди HP; агент автоматично пропонує план ремонту.

### Радар здоров'я та техборгу

Радарна діаграма аномалій. Перетвори рефакторинг на зачистку «червоних зон» складності та техборгу. Фоновий моніторинг здоров'я попереджає про критичні аномалії: `[CRITICAL_ANOMALY]: Виявлено нестабільність у секторі src/logic`.

### Хроніка сесій

Автоматична база знань усіх дій. Генерація PR-звітів та стендапів в один клік. **Крос-сесійна пам'ять** — агент згадує попередню роботу над тим самим кодом: `[RECALLING_DATA]: Раніше ми працювали над цим модулем...`

### Проактивний асистент (Ambient Thinking)

Фоновий пульс кожні 5 хвилин аналізує `git diff` та патерни помилок. Якщо знайдено щось важливе, агент ініціює діалог сам: `[PROACTIVE_LOG]: Аналіз фонових процесів завершено. Виявлено надлишковість. Оператор, ініціювати стабілізацію?`

### Нейронний голосовий канал

Голосовий ввід через кнопку мікрофона в командному рядку. Web Speech API TTS озвучує відповіді ІІ. Процедурний аудіо-рушій: scanning-тони при використанні інструментів, glitch-шум при помилках, акорд успіху при завершенні.

### Режим глибокого занурення

RPG-таймер фокусу з множником досвіду (x2 EXP). Робота в потоці відновлює твою ментальну «Ману».

### Візуальні ефекти присутності

Анімована хвильова форма в хедері пульсує коли ІІ думає. Коли HP падає нижче 20%, весь UI отримує glitch-ефект спотворення з червоною віньєткою — твої системи виходять з ладу, Оператор.

### RPG-система прогресу

- **EXP та рівні** — отримуй досвід за дії з кодом (повідомлення, коміти, виправлення багів, збереження файлів)
- **HP / MP** — HP зменшується від невдалих команд, MP витрачається на використання інструментів
- **Режим фокусу** — таймер у стилі Pomodoro з множником EXP x2
- **Сповіщення про підвищення рівня** з візуальними ефектами

### AI-чат асистент

- **Мульти-провайдерна підтримка** — Anthropic Claude, OpenAI GPT, Google Gemini, Custom (Ollama, локальні LLM)
- **Потокові відповіді** з інтеграцією інструментів
- **Збереження діалогів** — автозбереження, відновлення між сесіями
- **Ін'єкція контексту проєкту** — AI розуміє твою кодову базу
- **Тактична особистість** — агент звертається до тебе «Оператор» та доповідає в аналітичному стилі з відсотками впевненості

### Вбудований редактор коду

- **Monaco Editor** з 4 sci-fi темами
- **Табове редагування** кількох файлів
- **Перевірка синтаксису** (Python, JavaScript, TypeScript)
- **Перегляд diff** — порівняння коду side-by-side
- **Файловий експлорер** з деревом навігації

### Візуальний Git-клієнт

- **Панель Git-статусу** — staged, unstaged, untracked файли з іконками статусу
- **Stage/unstage** окремих файлів
- **Inline коміт** з полем введення повідомлення
- **AI-генерація повідомлень комітів**
- **Скасування змін** по файлах

### Інструменти продуктивності

- **Палітра команд** (Cmd+K) — 20+ вбудованих команд
- **Швидке відкриття** (Cmd+P) — fuzzy-пошук файлів
- **Пошук по файлах** з превʼю результатів
- **Знайти та замінити** по всьому проєкту
- **Система квестів** — автосканування TODO/FIXME та перетворення їх на квести

### Теми та локалізація

- **4 теми**: Dark Ops (cyan), Midnight (blue), Phantom (amber), Arctic (light blue)
- **2 мови**: англійська, російська
- **Sci-fi / тактична естетика** з ефектами glass morphism

## Філософія

- **AI-First**: Інтерфейс абстрагований від файлів. Код — це артефакт, а не центр уваги.
- **Visual Context**: Якщо це не можна побачити на карті, цього не існує.
- **Proactive Assistance**: Твій агент говорить першим, якщо відчуває небезпеку в секторі.

## Архітектура

```
src/                        # React 19 + TypeScript + Vite 7
  components/               # 40+ компонентів у 15 функціональних областях
    bars/                   # Смужка EXP, стат-бари
    chat/                   # OmniChat, бульбашки (повідомлення, здоров'я, recall, blast, proactive)
    editor/                 # Monaco-редактор, таби файлів
    explorer/               # Файлове дерево
    focus/                  # Таймер фокусу
    git/                    # Панель Git-статусу
    health/                 # Метрики коду, радар-чарт
    layout/                 # 3-панельний layout, верхній стат-бар
    map/                    # Тактична карта залежностей
    modals/                 # Палітра команд, налаштування, diff-перегляд тощо
    chronicle/              # Журнал сесій
    welcome/                # Екран першого запуску
    ui/                     # Glass card, glow panel, waveform visualizer
  stores/gameStore.ts       # Zustand 5 — єдиний глобальний стор
  hooks/                    # useApi, useAudio, useHealthWatch, useProactivePulse тощо
  types/game.ts             # Усі TypeScript-інтерфейси
  i18n/translations.ts      # EN/RU переклади (250+ ключів)
  themes/                   # CSS custom properties, 4 теми

backend/                    # Python 3.12+ FastAPI
  routes/                   # 13 API-роутерів, 60+ ендпоінтів
  models/                   # Pydantic-моделі
  services/                 # Бізнес-логіка
    providers/              # AI-провайдери (Anthropic, OpenAI, Gemini, Custom)
  conversations/            # JSON-файли — збережені діалоги
  state.json                # Стан гравця

src-tauri/                  # Rust — Tauri 2.0 оболонка
  src/lib.rs                # Налаштування додатку, життєвий цикл Python-процесу, OAuth
```

## Вимоги

- **Node.js** >= 18
- **pnpm** (рекомендовано) або npm
- **Rust** (остання стабільна версія) — [встановлення через rustup](https://rustup.rs/)
- **Python** >= 3.12
- **uv** — менеджер пакетів Python — [встановлення](https://docs.astral.sh/uv/getting-started/installation/)
- **Системні залежності Tauri 2** — [посібник для платформ](https://v2.tauri.app/start/prerequisites/)

### macOS

```bash
# Встановлення Xcode Command Line Tools (якщо ще не встановлено)
xcode-select --install

# Встановлення Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Встановлення uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# Встановлення pnpm (якщо не встановлено)
npm install -g pnpm
```

### Linux (Debian/Ubuntu)

```bash
# Системні залежності для Tauri
sudo apt update
sudo apt install libwebkit2gtk-4.1-dev build-essential curl wget file \
  libxdo-dev libssl-dev libayatana-appindicator3-dev librsvg2-dev

# Встановлення Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Встановлення uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# Встановлення pnpm
npm install -g pnpm
```

### Windows

```powershell
# Встановлення Rust через rustup (завантажити з https://rustup.rs)
# Встановлення Microsoft C++ Build Tools (через Visual Studio Installer)
# Встановлення WebView2 (попередньо встановлено у Windows 11)

# Встановлення uv
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# Встановлення pnpm
npm install -g pnpm
```

## Встановлення

```bash
# Клонування репозиторію
git clone https://github.com/atljh/codemancer.git
cd codemancer

# Встановлення фронтенд-залежностей
pnpm install

# Встановлення бекенд-залежностей
cd backend && uv sync && cd ..
```

## Розробка

```bash
# Повний десктопний додаток (Vite + Rust + Python бекенд)
pnpm tauri dev

# Тільки фронтенд (Vite dev-сервер на http://localhost:1420)
pnpm dev

# Тільки бекенд (FastAPI на http://127.0.0.1:8420)
cd backend && uv run python -m uvicorn main:app --host 127.0.0.1 --port 8420

# Перевірка типів
pnpm exec tsc --noEmit
```

### Як це працює

1. `pnpm tauri dev` запускає Tauri-оболонку (Rust)
2. Tauri породжує Python FastAPI бекенд як дочірній процес на порті **8420**
3. Vite dev-сервер запускає React-фронтенд на порті **1420**
4. Фронтенд спілкується з бекендом через HTTP/SSE

## Збірка для продакшену

```bash
# Збірка десктопного додатку
pnpm tauri build
```

Зібраний додаток буде у `src-tauri/target/release/bundle/`.

## Налаштування

### Налаштування AI-провайдера

При першому запуску відкрий **Налаштування** (іконка шестірні) та налаштуй AI-провайдер:

| Провайдер     | Що потрібно                                                        |
| ------------- | ------------------------------------------------------------------ |
| **Anthropic** | API-ключ або OAuth (вхід через акаунт Anthropic)                   |
| **OpenAI**    | API-ключ з platform.openai.com                                     |
| **Gemini**    | API-ключ з ai.google.dev                                           |
| **Custom**    | URL будь-якого OpenAI-сумісного ендпоінту (Ollama, LM Studio тощо) |

### Робочий простір

Обери директорію проєкту через іконку папки у верхній панелі. Codemancer просканує її та побудує дерево файлів, граф залежностей та список квестів.

## Система EXP

| Дія                       | EXP        |
| ------------------------- | ---------- |
| Відправлення повідомлення | +10        |
| Збереження файлу          | +5         |
| Застосування коду         | +50        |
| Виправлення багу          | +100       |
| Git коміт                 | варіюється |
| Виконання інструменту     | +15-25     |
| Режим фокусу              | множник x2 |

**Формула рівня**: `level = floor(sqrt(total_exp / 100))`

## Технологічний стек

| Шар                | Технологія                                            |
| ------------------ | ----------------------------------------------------- |
| Десктопна оболонка | Tauri 2.0 (Rust)                                      |
| Фронтенд           | React 19, TypeScript, Vite 7                          |
| Стилізація         | Tailwind CSS 4.2, Framer Motion 12                    |
| Стейт              | Zustand 5                                             |
| Редактор           | Monaco Editor                                         |
| Аудіо              | Web Audio API (процедурний), Web Speech API (TTS/STT) |
| Іконки             | Lucide React                                          |
| Бекенд             | Python 3.12+, FastAPI, Uvicorn                        |
| AI SDK             | anthropic, openai, google-genai                       |
| Пакетні менеджери  | pnpm (фронтенд), uv (бекенд), cargo (Rust)            |

## Що далі

- **Visual Vision** — можливість агента «бачити» UI запущеного додатку
- **Skill Trees** — прокачка навичок «Архітектора» або «Дебаггера», що відкриває нові інструменти агента
- **Мульти-агентна оркестрація** — координація кількох ІІ-агентів на складних задачах
- **GitHub/CI інтеграція** — рев'ю PR, моніторинг пайплайнів з командного центру

Codemancer — це твоя особиста Цитадель у світі нескінченного коду. Час перестати кодити і почати перемагати.

## Ліцензія

MIT
